zerops:
  - setup: app
    build:
      os: ubuntu
      base: go@latest
      buildCommands:
        - go build -o bin/ppa-server
      deployFiles:
        - bin/ppa-server
      cache: true
    run:
      base: ubuntu@latest
      ports:
        - port: 8080
          httpSupport: true
      envVariables:
        LISTEN_ADDR: :8080
        LOG_LEVEL: INFO

        S3_ENDPOINT: ${storage_apiUrl}
        S3_BUCKET: ${storage_bucketName}
        S3_ACCESS_KEY: ${storage_accessKeyId}
        S3_SECRET_KEY: ${storage_secretAccessKey}

        DISCORD_POLL_INTERVAL: 5m
        POSTMAN_POLL_INTERVAL: 5m
        ZCLI_POLL_INTERVAL: 5m

        MAINTAINER: Matěj Pavlíček <tikinang@gmail.com>
      start: ./bin/ppa-server
